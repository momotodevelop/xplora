<h2 class="text-18 fw-500 mt-20 md:mt-24">Información de Pago</h2>
<div>
    <mat-radio-group [(ngModel)]="paymentTypeSelected" (change)="changePaymentType()" class="row x-gap-10 y-gap-10 mt-10" aria-label="Select an option">
        <div class="col-md-6">
            <mat-radio-button value="NOW" color="primary" class="border-light rounded-4 w-100 d-flex payment-type-radiobuton">
                <div class="fw-500">Pagar ahora</div>
                <span class="badge badge-pill badge-success d-flex items-center">-10%</span>
            </mat-radio-button>
        </div>
        <div class="col-md-6">
            <mat-radio-button value="DELAYED" color="primary" class="border-light rounded-4 w-100 d-flex payment-type-radiobuton">
                <div class="fw-500">Pagar en el hotel</div>
            </mat-radio-button>
        </div>
    </mat-radio-group>
    <mat-tab-group (selectedTabChange)="changePaymentMethod($event)" mat-stretch-tabs class="example-stretched-tabs mat-elevation-z4 rounded-4 mt-20">
        <mat-tab label="Tarjeta de Crédito/Débito">
            <div class="px-15 py-15 w-100">
                @if(paymentTypeSelected==='NOW'){
                    <div class="text-16 fw-500">Pagar ahora {{amount|currency:'MXN'}}</div>
                }@else{
                    <div class="text-16 fw-500">Se requiere una tarjeta para garantizar tu tarifa</div>
                    <div class="text-14">No se realizará ningún cargo en este momento. El pago se efectuará al momento de tu check-in.</div>
                }
                <form [formGroup]="ccForm">
                    <div class="row x-gap-10 mt-20">
                        <div class="col-12 col-md-6">
                            <mat-form-field appearance="outline" subscriptSizing="dynamic" class="w-100 mb-10">
                                <mat-label>Número de Tarjeta</mat-label>
                                <input matInput ccNumber #ccNumber="ccNumber" placeholder="0000 0000 0000 0000" formControlName="number">
                            </mat-form-field>
                        </div>
                        <div class="col-6 col-md-3">
                            <mat-form-field appearance="outline" subscriptSizing="dynamic" class="w-100 mb-10">
                                <mat-label>Expiración</mat-label>
                                <input matInput ccExp placeholder="MM/AA" formControlName="expiration">
                            </mat-form-field>
                        </div>
                        <div class="col-6 col-md-3">
                            <mat-form-field appearance="outline" subscriptSizing="dynamic" class="w-100 mb-10">
                                <mat-label>CVV</mat-label>
                                <input matInput ccCVC placeholder="000" formControlName="cvv">
                            </mat-form-field>
                        </div>
                        <div class="col-12 col-md-6">
                            <mat-form-field appearance="outline" subscriptSizing="dynamic" class="w-100 mb-10">
                                <mat-label>Nombre del titular</mat-label>
                                <input matInput placeholder="Nombre(s)" formControlName="holderName">
                            </mat-form-field>
                        </div>
                        <div class="col-12 col-md-6">
                            <mat-form-field appearance="outline" subscriptSizing="dynamic" class="w-100 mb-10">
                                <mat-label>Apellido del titular</mat-label>
                                <input matInput placeholder="Apellido(s)" formControlName="holderLastName">
                            </mat-form-field>
                        </div>
                        @if(installments&&installments.length>1){
                            <div class="col-12">
                                <mat-form-field appearance="outline" subscriptSizing="dynamic" class="w-100 mb-10">
                                    <mat-label>Pago diferido disponible</mat-label>
                                    <mat-select formControlName="installments" [panelClass]="'installment-selector-hotel-booking'">
                                        <mat-select-trigger>
                                            @if(selectedInstallment.quantity===1){
                                                Un solo pago
                                            }@else{
                                                {{selectedInstallment.quantity}} Meses sin intereses
                                            }
                                        </mat-select-trigger>
                                        @for(installment of installments; track installment.quantity){
                                            @if(installment.quantity===1){
                                                <mat-option style="border-bottom: 1px solid #dadada;" [value]="installment.quantity">
                                                    <div class="text-16 fw-500" mat-line>Un solo pago</div>
                                                    <div class="text-14" mat-line>De {{installment.amount|currency:'MXN'}}.</div>
                                                </mat-option>
                                            }@else{
                                                <mat-option style="border-bottom: 1px solid #dadada;" [value]="installment.quantity">
                                                    <div class="text-16" mat-line>{{installment.quantity}} Mensualidades Sin Intereses</div>
                                                    <div class="text-14" mat-line>De {{installment.amount|currency:'MXN'}} cada una.</div>
                                                </mat-option>
                                            }
                                        }
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        }
                    </div>
                </form>
            </div>
        </mat-tab>
        @if(paymentTypeSelected==='NOW'){
            <mat-tab label="Transferencia SPEI">
                <div class="w-100 px-10 py-10">
                    <div class="row x-gap-10 px-15 y-gap-15">
                        <div class="col-md-4">
                            <img src="/assets/img/payments/transfer-payment.jpeg" class="rounded-4">
                        </div>
                        <div class="col-md-8">
                            <div class="text-16 fw-500">Transferencia Bancaria (SPEI)</div>
                            <div style="text-align: justify;" class="text-15 lh-15">
                                Puedes realizar tu pago mediante transferencia bancaria SPEI, una opción rápida y segura para transferir fondos directamente desde tu cuenta bancaria. <b>Al elegir esta opción, recibirás los datos bancarios y una referencia para completar la transacción. Nuestro sistema utiliza inteligencia artificial (IA) para validar la transferencia automáticamente</b>, reduciendo tiempos de espera y agilizando la confirmación de tu pago.*
                            </div>
                            <div class="text-12 text-light-1">
                                *En casos excepcionales, la validación automática podría requerir revisión manual.
                            </div>
                        </div>
                    </div>
                </div>
            </mat-tab>
            <mat-tab label="Efectivo">
                <div class="w-100 px-10 py-10">
                    <div class="row x-gap-10 px-15 y-gap-15">
                        <div class="col-md-4">
                            <img src="/assets/img/payments/cash-payment.jpeg" class="rounded-4">
                        </div>
                        <div class="col-md-8">
                            <div class="text-16 fw-500">Pago en Efectivo</div>
                            <div style="text-align: justify;" class="text-15 lh-15">
                                Si prefieres pagar en efectivo, puedes hacerlo en establecimientos autorizados como tiendas de conveniencia, bancos o puntos de pago específicos. <b>Al seleccionar esta opción, recibirás un código de referencia y tendrás un tiempo límite para completar el pago.</b> Una vez realizado el pago, <b>nuestro sistema utiliza inteligencia artificial (IA) para validar la transacción automáticamente</b>, lo que acelera el proceso de confirmación.*
                            </div>
                            <div class="text-12 text-light-1">
                                *En casos excepcionales, la validación automática podría requerir revisión manual.
                            </div>
                        </div>
                    </div>
                </div>
            </mat-tab>
        }
    </mat-tab-group>
</div>
