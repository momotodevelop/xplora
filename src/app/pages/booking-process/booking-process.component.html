@if(confirmationLoader){
    <app-booking-creation-loader (completed)="completeLoader()" [steps]="confirmationLoaderSteps" [paymentMethod]="'CASH'" [paymentType]="'NOW'"></app-booking-creation-loader>
}
@if(booking!==undefined){
    <!-- <section class="layout-pt-md">
        <div class="section-bg__item col-12">
            <app-header-map [lat]="booking.destination.geoCode.latitude" [lng]="booking.destination.geoCode.longitude" ></app-header-map>
        </div>
        <div class="container">
            <div class="row justify-center text-center">
                <div class="col-xl-6 col-lg-8 col-md-10">
                <h1 class="text-40 md:text-25 fw-600 text-white">Tu viaje a {{booking.destination.address.cityName|titlecase}}</h1>
                <div class="text-white mt-15">Completa tu reservación</div>
                </div>
            </div>
        </div>
    </section> -->
    <div class="container mt-40">
        <div class="row">
            <div class="col-xl-7 col-lg-8">
                <mat-vertical-stepper class="booking-stepper" #stepper [linear]="true">
                    <mat-step [completed]="passengers!==undefined">
                        <ng-template matStepLabel><h2 class="text-16 fw-500">Pasajeros</h2></ng-template>
                        @if(booking){
                            <app-passengers [adults]="booking.flightDetails.passengers.counts.adults" [childrens]="booking.flightDetails.passengers.counts.childrens" [infants]="booking.flightDetails.passengers.counts.infants" [passengersData]="booking.flightDetails.passengers.details ?? []" (valid)="passengers = $event"></app-passengers>
                        }
                        <div>
                            <button [disabled]="!passengers" (click)="processPassengers()" color="primary" mat-raised-button class="w-100">
                                Siguiente <fa-icon [icon]="loadingProcess?spinnerIcon:nextIcon" [animation]="loadingProcess?'spin':undefined"></fa-icon>
                            </button>
                        </div>
                    </mat-step>
                    <mat-step [completed]="contactInfo!==undefined">
                        <ng-template matStepLabel><h2 class="text-16 fw-500">Información de Contacto</h2></ng-template>
                        <app-contact-info (valid)="contactInfo = $event"></app-contact-info>
                        <button mat-flat-button [disabled]="!contactInfo" (click)="processContact()" color="primary" class="w-100 mt-4">
                            Siguiente <fa-icon [icon]="loadingProcess?spinnerIcon:nextIcon" [animation]="loadingProcess?'spin':undefined"></fa-icon>
                        </button>
                    </mat-step>
                    <mat-step>
                        <ng-template matStepLabel><h2 class="text-16 fw-500">Asientos</h2></ng-template>
                        <app-seats (completed)="processSeats($event)" (skip)="skipStep('SEATS')" (goToPassengers)="goToPassengers()"></app-seats>
                    </mat-step>
                    <mat-step>
                        <ng-template matStepLabel><h2 class="text-16 fw-500">Servicios Adicionales</h2></ng-template>
                        <app-extras (next)="stepper.next()" (skip)="skipStep('EXTRAS')" #extras></app-extras>
                    </mat-step>
                    <mat-step [ngClass]="{'payment-step': true}">
                        <ng-template matStepLabel>Pagar Reservación</ng-template>
                        <app-payment (selectedPaymentMethod)="changePaymentMethod($event)"></app-payment>
                    </mat-step>
                </mat-vertical-stepper>
            </div>
            <div class="col-xl-5 col-lg-4 pt-20">
                @if(booking!==undefined){
                    <app-booking-sidebar (openInsuranceExtra)="openInsuranceFromSidebar()"></app-booking-sidebar>
                }
            </div>
        </div>
    </div>
}