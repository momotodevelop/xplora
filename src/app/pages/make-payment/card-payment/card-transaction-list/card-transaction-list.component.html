<mat-card class="mt-20">
    <mat-card-header class="d-flex justify-content-between">
        <mat-card-title style="font-weight: bolder; font-size: 16px;">
            <h5>Historial de Transacciones</h5>
        </mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <div class="list-group">
            @if(savedPayments.length > 0){
                @for(payment of savedPayments; track payment) {
                    <a href="#" class="list-group-item list-group-item-action mt-15">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1">
                                <fa-icon [icon]="getCardIcon(payment.type)"></fa-icon>
                                @if(payment.type==='amex'){
                                    {{payment.number.slice(0,4)}} •••••• {{payment.number.slice(-5)}}
                                }@else{
                                    {{payment.number.slice(0,4)}} •••• •••• {{payment.number.slice(-4)}}
                                }
                            </h6>
                            <small><fa-icon [icon]="timeIcon"></fa-icon> {{payment.createdAt | timeAgo}}</small>
                        </div>
                        <p class="mb-1">{{payment.amount | currency: 'MXN'}}</p>
                        <div class="d-flex w-100 justify-content-between">
                            <div>
                                @switch(payment.status) {
                                    @case('pending') {
                                        <span class="badge bg-warning text-dark">Pendiente</span>
                                    }
                                    @case('completed') {
                                        <span class="badge bg-success">Confirmado</span>
                                    }
                                    @case('failed') {
                                        <span class="badge bg-danger">Rechazado</span>
                                    }
                                }
                            </div>
                            <div class="text-dark text-end">
                                Pago Electronico
                            </div>
                        </div>
                    </a>
                }
            }@else{
                <div class="text-center mt-20 d-flex flex-column align-items-center h-100">
                    <p class="text-muted">No hay pagos registrados.</p>
                </div>
            }
        </div>
    </mat-card-content>
    <mat-card-footer style="padding: 0 16px;">
        <div class="d-flex justify-content-between mt-15">
            <h6 class="text-muted">Total a pagar:</h6>
            <span class="text-dark">{{total | currency: 'MXN'}}</span>
        </div>
        <div class="d-flex justify-content-between">
            <h6 class="text-muted">Total pagado:</h6>
            <span class="text-dark">{{payed | currency: 'MXN'}}</span>
        </div>
        <div class="d-flex justify-content-between">
            <h6 class="text-muted">Pendiente de pago:</h6>
            <span class="text-dark">{{paymentPending | currency: 'MXN'}}</span>
        </div>
    </mat-card-footer>
</mat-card>